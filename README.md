# Gorbenko R, MFTIBIO-3, Breast Cancer Diagnostic ETL Pipeline

## Пререквизиты
Airflow установлен и настроен в cloud.ru (инструкция была приложена к ДЗ1,ДЗ2 по предмету)

## Инструкция по запуску
sudo pip install -r /home/gorbenkoteh/airflow/dags/breast_cancer_etl/requirements.txt   (Установить зависимости)
sudo airflow dags unpause breast_cancer_pipeline
sudo airflow dags trigger breast_cancer_pipeline

## Назначение скриптов

- **dags/**: Папка для DAG-файлов Airflow  
  - `cancer_pipeline.py` - основной сценарий оркестрации ETL
- **etl/**: Скрипты этапов обработки данных
  - `load_data.py` - загрузка исходных данных
  - `preprocess.py` - очистка и преобразование данных
  - `train_model.py` - обучение ML-модели
  - `evaluate.py` - валидация модели
  - `save_results.py` - сохранение артефактов
- **results/**: Результаты работы
  - `metrics.json` - метрики качества модели
  - `model.pkl` - сериализованная модель
- **logs/**: Директория для лог-файлов
- **config.py**: Конфигурационные параметры (пути, настройки)
- **requirements.txt**: Зависимости Python
- **README.md**: Документация проекта

## Описание проекта
Автоматизированный ETL-пайплайн для прогнозирования рака молочной железы с использованием набора данных Breast Cancer Wisconsin Diagnostic. Пайплайн включает загрузку данных, предобработку, обучение модели, оценку качества и сохранение результатов.

## ML-задача
**Бинарная классификация:** Определение типа опухоли (злокачественная/M или доброкачественная/B) на основе 30 признаков, включая характеристики ядер клеток (радиус, текстура, периметр и др.).

## Обработка ошибок и механизмы устойчивости

### Загрузка данных
- **Ошибка:** Файл не найден/некорректный формат  
  **Решение:**  
  - Retry (3 попытки)  
  - Валидация структуры файла перед обработкой

### Предобработка
- **Ошибка:** Пропущенные значения, нечисловые данные  
  **Решение:**  
  - Автоматическое заполнение средними значениями  
  - Логирование проблемных строк с уведомлением

### Обучение модели
- **Ошибка:** Несходимость алгоритма  
  **Решение:**  
  - Увеличение max_iter параметра  
  - Балансировка классов через SMOTE/веса классов

### Сохранение результатов
- **Ошибка:** Отсутствие прав доступа к хранилищу  
  **Решение:**  
  - Динамические OAuth-токены с TTL  
  - Callback-уведомления об ошибках записи

---

### Механизмы устойчивости системы

| Механизм       | Реализация                              |
|----------------|-----------------------------------------|
| **Retries**    | 3 автоматические попытки для каждой задачи |
| **Timeout**    | Ограничение 10 минут на выполнение задачи |
| **Alerting**   | Email-уведомления при критических сбоях |
| **Isolation**  | Независимая работа компонентов пайплайна |
| **Validation** | Контроль качества данных между этапами  |

## Планы на развитие

- **Добавить версионирование моделей**  
  Интеграция с MLflow для трекинга экспериментов и управления версиями моделей

- **Реализовать мониторинг дрейфа данных**  
  Внедрение системы обнаружения концептуального дрейфа и изменений в распределении данных

- **Добавить автоматический ретрайнинг**  
  Реализация триггеров для переобучения модели при падении качества ниже пороговых значений

- **Внедрить DVC для управления данными**  
  Использование Data Version Control для воспроизводимости экспериментов и контроля версий датасетов

- **Реализовать API для прогнозов**  
  Развертывание RESTful API на FastAPI для обслуживания модельных прогнозов

- **Добавить тесты для компонентов**  
  Внедрение модульных и интеграционных тестов для всех этапов ETL-пайплайна

- **Внедрить валидацию данных**  
  Использование Pydantic для строгой проверки структуры и типов входных данных

- **Реализовать параллельное выполнение**  
  Оптимизация пайплайна через параллельную обработку независимых задач


## Общая архитектура пайплайна
```
graph TD
    A[Загрузка данных] --> B[Предобработка]
    B --> C[Обучение модели]
    C --> D[Оценка модели]
    D --> E[Сохранение результатов]
    E --> F[Облачное хранилище]

